
> rest-express@1.0.0 dev:backend
> cross-env NODE_ENV=development PORT=5001 tsx server/index.ts

1:05:47 AM [express] Using MemoryStore for development sessions
New database connection established
âœ“ Connected to Coolify PostgreSQL database
New database connection established
1:05:47 AM [express] [Owner Account] Owner account akg45272@gmail.com already exists
1:05:47 AM [express] ðŸ“¡ WebSocket server initialized at /ws
1:05:50 AM [express] serving on port 5001
Database connection removed from pool
Database connection removed from pool
2:36:58 AM [express] GET /api/auth/me 401 in 19ms :: {"error":"Not authenticated"}
New database connection established
2:36:58 AM [express] GET /api/questions/preview 304 in 209ms :: {"questions":[{"id":1,"topicId":1,"qâ€¦
2:37:22 AM [express] GET /api/auth/me 401 in 3ms :: {"error":"Not authenticated"}
2:37:25 AM [express] GET /api/auth/me 401 in 1ms :: {"error":"Not authenticated"}
2:37:25 AM [express] GET /api/questions/preview 304 in 41ms :: {"questions":[{"id":1,"topicId":1,"quâ€¦
2:39:31 AM [express] GET /api/subscription-plans 304 in 47ms :: [{"id":1,"name":"Free","slug":"free"â€¦
2:41:50 AM [express] POST /api/explain 200 in 2315ms :: {"declined":true,"guardrailReason":"off_topiâ€¦
2:42:31 AM [express] POST /api/explain 200 in 8301ms :: {"answer":"Newton's second law of motion staâ€¦
2:43:02 AM [express] POST /api/explain 200 in 5344ms :: {"answer":"Photosynthesis is a process by whâ€¦
2:43:35 AM [express] POST /api/explain 200 in 4314ms :: {"answer":"Newton's second law states that tâ€¦
2:44:03 AM [express] POST /api/explain 200 in 3414ms :: {"answer":"Electric current flows in a circuâ€¦
2:44:14 AM [express] GET /api/questions/preview 304 in 42ms :: {"questions":[{"id":1,"topicId":1,"quâ€¦
2:45:25 AM [express] GET /api/auth/me 401 in 1ms :: {"error":"Not authenticated"}
2:45:25 AM [express] GET /api/questions/preview 304 in 37ms :: {"questions":[{"id":1,"topicId":1,"quâ€¦
2:45:29 AM [express] GET /api/subscription-plans 304 in 37ms :: [{"id":1,"name":"Free","slug":"free"â€¦
2:46:39 AM [express] POST /api/auth/login 401 in 41ms :: {"error":"Invalid email or password"}
2:46:40 AM [express] POST /api/auth/login 401 in 39ms :: {"error":"Invalid email or password"}
2:47:47 AM [express] POST /api/auth/signup 200 in 447ms :: {"user":{"id":"22c6dca2-f397-471c-b459-ebâ€¦
2:47:48 AM [express] GET /api/auth/me 200 in 36ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7a9â€¦
2:47:48 AM [express] GET /api/stats/user/22c6dca2-f397-471c-b459-eb93a7a92815 200 in 60ms :: {"totalâ€¦
New database connection established
New database connection established
2:47:49 AM [express] GET /api/game/leaderboard/rank/22c6dca2-f397-471c-b459-eb93a7a92815 402 in 382mâ€¦
[library] user=22c6dca2-f397-471c-b459-eb93a7a92815 rows=104 limit=200 offset=0 progress=false duration=498ms
2:47:49 AM [express] GET /api/lms/library 304 in 511ms :: [{"id":64,"subject":"Biology","classLevel"â€¦
New database connection established
New database connection established
New database connection established
2:47:49 AM [express] GET /api/mentors/recommendations 304 in 1247ms :: {"topRated":[{"id":1,"userId"â€¦
2:47:49 AM [express] GET /api/game/leaderboard 402 in 1263ms :: {"error":"PAYMENT_REQUIRED","messageâ€¦
2:47:49 AM [express] GET /api/learn/continue-learning 402 in 1291ms :: {"error":"PAYMENT_REQUIRED","â€¦
2:48:14 AM [express] GET /api/game/leaderboard 402 in 62ms :: {"error":"PAYMENT_REQUIRED","message":â€¦
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
2:48:20 AM [express] GET /api/game/leaderboard 402 in 62ms :: {"error":"PAYMENT_REQUIRED","message":â€¦
2:48:34 AM [express] GET /api/topics 304 in 69ms :: [{"id":1,"subject":"Physics","classLevel":"Classâ€¦
New database connection established
2:48:34 AM [express] GET /api/auth/me 304 in 176ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7aâ€¦
2:48:34 AM [express] GET /api/game/combo/22c6dca2-f397-471c-b459-eb93a7a92815/General 402 in 61ms ::â€¦
2:48:35 AM [express] GET /api/questions 304 in 793ms :: {"questions":[{"id":1,"topicId":1,"questionTâ€¦
2:48:47 AM [express] GET /api/game/leaderboard 402 in 74ms :: {"error":"PAYMENT_REQUIRED","message":â€¦
2:48:54 AM [express] GET /api/stats/user/22c6dca2-f397-471c-b459-eb93a7a92815 304 in 39ms :: {"totalâ€¦
[library] user=22c6dca2-f397-471c-b459-eb93a7a92815 rows=104 limit=200 offset=0 progress=false duration=136ms
2:48:54 AM [express] GET /api/lms/library 304 in 150ms :: [{"id":64,"subject":"Biology","classLevel"â€¦
2:48:54 AM [express] GET /api/mentors/recommendations 304 in 2ms :: {"topRated":[{"id":1,"userId":"6â€¦
2:48:54 AM [express] GET /api/learn/continue-learning 402 in 62ms :: {"error":"PAYMENT_REQUIRED","meâ€¦
2:48:54 AM [express] GET /api/game/leaderboard 402 in 64ms :: {"error":"PAYMENT_REQUIRED","message":â€¦
New database connection established
2:48:54 AM [express] GET /api/game/leaderboard/rank/22c6dca2-f397-471c-b459-eb93a7a92815 402 in 200mâ€¦
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
New database connection established
New database connection established
New database connection established
New database connection established
2:49:38 AM [express] GET /api/learn/bookmarks/formulas 402 in 304ms :: {"error":"PAYMENT_REQUIRED","â€¦
2:49:38 AM [express] GET /api/chapters/by-chapter/chemistry/11/1 200 in 354ms :: {"id":31,"subject":â€¦
2:49:38 AM [express] GET /api/learn/bookmarks/keypoints 402 in 343ms :: {"error":"PAYMENT_REQUIRED",â€¦
2:49:38 AM [express] GET /api/chapters 200 in 581ms :: [{"id":246,"subject":"Chemistry","classLevel"â€¦
2:49:39 AM [express] GET /api/questions 200 in 110ms :: {"questions":[],"total":0,"page":1,"limit":1â€¦
2:49:39 AM [express] GET /api/chapters/chat/health 304 in 7ms :: {"configured":true,"model":"gpt-4o-â€¦
2:49:39 AM [express] GET /api/lms/bookmarks 304 in 86ms :: []
2:49:40 AM [express] POST /api/lms/sessions 201 in 510ms :: {"id":103,"userId":"22c6dca2-f397-471c-bâ€¦
2:49:53 AM [express] PATCH /api/lms/sessions/103 400 in 32ms :: {"error":"value.toISOString is not aâ€¦
2:49:53 AM [express] GET /api/chapters/by-chapter/chemistry/11/1 304 in 39ms :: {"id":31,"subject":"â€¦
2:49:53 AM [express] GET /api/topics 304 in 77ms :: [{"id":1,"subject":"Physics","classLevel":"Classâ€¦
2:49:53 AM [express] GET /api/game/combo/22c6dca2-f397-471c-b459-eb93a7a92815/Chemistry 402 in 74ms â€¦
2:49:53 AM [express] GET /api/questions 200 in 63ms :: {"questions":[],"total":0,"page":1,"limit":10â€¦
2:50:01 AM [express] GET /api/questions 200 in 60ms :: {"questions":[],"total":0,"page":1,"limit":10â€¦
2:50:02 AM [express] GET /api/game/combo/22c6dca2-f397-471c-b459-eb93a7a92815/General 402 in 60ms ::â€¦
2:50:02 AM [express] GET /api/game/combo/22c6dca2-f397-471c-b459-eb93a7a92815/Chemistry 402 in 70ms â€¦
2:50:04 AM [express] GET /api/questions 304 in 60ms :: {"questions":[],"total":0,"page":1,"limit":10â€¦
2:50:05 AM [express] GET /api/topics 304 in 70ms :: [{"id":1,"subject":"Physics","classLevel":"Classâ€¦
2:50:05 AM [express] GET /api/chapters/by-chapter/chemistry/11/1 304 in 42ms :: {"id":31,"subject":"â€¦
2:50:05 AM [express] GET /api/game/combo/22c6dca2-f397-471c-b459-eb93a7a92815/Chemistry 402 in 76ms â€¦
2:50:10 AM [express] GET /api/chapters/by-chapter/chemistry/11/1 304 in 39ms :: {"id":31,"subject":"â€¦
2:50:10 AM [express] GET /api/learn/bookmarks/keypoints 402 in 64ms :: {"error":"PAYMENT_REQUIRED","â€¦
2:50:10 AM [express] GET /api/learn/bookmarks/formulas 402 in 73ms :: {"error":"PAYMENT_REQUIRED","mâ€¦
2:50:10 AM [express] GET /api/chapters 304 in 177ms :: [{"id":246,"subject":"Chemistry","classLevel"â€¦
2:50:11 AM [express] GET /api/chapters/chat/health 304 in 2ms :: {"configured":true,"model":"gpt-4o-â€¦
2:50:11 AM [express] GET /api/questions 304 in 60ms :: {"questions":[],"total":0,"page":1,"limit":10â€¦
2:50:11 AM [express] GET /api/lms/bookmarks 304 in 68ms :: []
2:50:11 AM [express] POST /api/lms/sessions 201 in 188ms :: {"id":104,"userId":"22c6dca2-f397-471c-bâ€¦
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
New database connection established
New database connection established
2:52:10 AM [express] PATCH /api/lms/sessions/104 400 in 192ms :: {"error":"value.toISOString is not â€¦
[library] user=22c6dca2-f397-471c-b459-eb93a7a92815 rows=104 limit=200 offset=0 progress=false duration=304ms
2:52:10 AM [express] GET /api/lms/library 304 in 315ms :: [{"id":64,"subject":"Biology","classLevel"â€¦
2:52:28 AM [express] GET /api/chapters/by-chapter/chemistry/11/15 200 in 45ms :: {"id":46,"subject":â€¦
2:52:29 AM [express] GET /api/chapters/chat/health 304 in 5ms :: {"configured":true,"model":"gpt-4o-â€¦
2:52:29 AM [express] GET /api/questions 200 in 72ms :: {"questions":[],"total":0,"page":1,"limit":10â€¦
2:52:30 AM [express] POST /api/lms/sessions 201 in 729ms :: {"id":105,"userId":"22c6dca2-f397-471c-bâ€¦
2:52:48 AM [express] PATCH /api/lms/sessions/105 400 in 31ms :: {"error":"value.toISOString is not aâ€¦
2:52:57 AM [express] GET /api/chapters/by-chapter/physics/11/1 304 in 80ms :: {"id":1,"subject":"Phyâ€¦
2:52:57 AM [express] GET /api/chapters 200 in 436ms :: [{"id":4,"subject":"Physics","classLevel":"11â€¦
2:52:57 AM [express] GET /api/questions 200 in 135ms :: {"questions":[],"total":0,"page":1,"limit":1â€¦
2:52:58 AM [express] POST /api/lms/sessions 201 in 612ms :: {"id":106,"userId":"22c6dca2-f397-471c-bâ€¦
2:53:45 AM [express] PATCH /api/lms/sessions/106 400 in 35ms :: {"error":"value.toISOString is not aâ€¦
2:53:50 AM [express] GET /api/chapters/by-chapter/biology/11/9 200 in 48ms :: {"id":90,"subject":"Biâ€¦
2:53:51 AM [express] GET /api/chapters 200 in 340ms :: [{"id":68,"subject":"Biology","classLevel":"1â€¦
2:53:51 AM [express] GET /api/chapters/chat/health 304 in 2ms :: {"configured":true,"model":"gpt-4o-â€¦
2:53:51 AM [express] GET /api/questions 200 in 69ms :: {"questions":[],"total":0,"page":1,"limit":10â€¦
2:53:51 AM [express] POST /api/lms/sessions 201 in 392ms :: {"id":107,"userId":"22c6dca2-f397-471c-bâ€¦
2:55:02 AM [express] PATCH /api/lms/sessions/107 400 in 35ms :: {"error":"value.toISOString is not aâ€¦
2:55:07 AM [express] GET /api/chapters/by-chapter/biology/11/5 200 in 41ms :: {"id":68,"subject":"Biâ€¦
2:55:08 AM [express] GET /api/chapters/chat/health 304 in 2ms :: {"configured":true,"model":"gpt-4o-â€¦
2:55:08 AM [express] GET /api/questions 200 in 73ms :: {"questions":[],"total":0,"page":1,"limit":10â€¦
2:55:09 AM [express] POST /api/lms/sessions 201 in 399ms :: {"id":108,"userId":"22c6dca2-f397-471c-bâ€¦
Database connection removed from pool
Database connection removed from pool
8:00:59 PM [express] GET /api/chapters/chat/health 304 in 3ms :: {"configured":true,"model":"gpt-4o-â€¦
New database connection established
New database connection established
New database connection established
New database connection established
8:00:59 PM [express] GET /api/learn/bookmarks/keypoints 402 in 284ms :: {"error":"PAYMENT_REQUIRED",â€¦
8:00:59 PM [express] GET /api/learn/bookmarks/formulas 402 in 288ms :: {"error":"PAYMENT_REQUIRED","â€¦
8:00:59 PM [express] GET /api/lms/bookmarks 304 in 307ms :: []
New database connection established
8:00:59 PM [express] GET /api/chapters 304 in 457ms :: [{"id":68,"subject":"Biology","classLevel":"1â€¦
8:00:59 PM [express] GET /api/chapters/by-chapter/biology/11/5 304 in 487ms :: {"id":68,"subject":"Bâ€¦
8:01:00 PM [express] GET /api/questions 304 in 166ms :: {"questions":[],"total":0,"page":1,"limit":1â€¦
8:01:05 PM [express] GET /api/auth/me 200 in 141ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7aâ€¦
8:01:05 PM [express] GET /api/learn/bookmarks/keypoints 402 in 264ms :: {"error":"PAYMENT_REQUIRED",â€¦
8:01:05 PM [express] GET /api/chapters/by-chapter/biology/11/5 304 in 273ms :: {"id":68,"subject":"Bâ€¦
8:01:05 PM [express] GET /api/learn/bookmarks/formulas 402 in 265ms :: {"error":"PAYMENT_REQUIRED","â€¦
8:01:06 PM [express] GET /api/chapters 304 in 438ms :: [{"id":68,"subject":"Biology","classLevel":"1â€¦
8:01:06 PM [express] POST /api/lms/sessions 201 in 229ms :: {"id":109,"userId":"22c6dca2-f397-471c-bâ€¦
8:01:06 PM [express] GET /api/chapters/chat/health 304 in 5ms :: {"configured":true,"model":"gpt-4o-â€¦
8:01:06 PM [express] GET /api/questions 304 in 63ms :: {"questions":[],"total":0,"page":1,"limit":10â€¦
8:01:06 PM [express] GET /api/lms/bookmarks 304 in 72ms :: []
8:01:28 PM [express] PATCH /api/lms/sessions/109 400 in 47ms :: {"error":"value.toISOString is not aâ€¦
8:01:28 PM [express] GET /api/questions/preview 304 in 63ms :: {"questions":[{"id":1,"topicId":1,"quâ€¦
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
8:10:21 PM [express] GET /api/questions/preview 500 in 10032ms :: {"message":"Failed to load previewâ€¦
8:10:21 PM [express] GET /api/auth/me 500 in 10037ms :: {"error":"Internal server error"}
New database connection established
8:13:49 PM [express] GET /api/auth/me 200 in 397ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7aâ€¦
New database connection established
8:13:50 PM [express] GET /api/questions/preview 200 in 748ms :: {"questions":[{"id":1,"topicId":1,"qâ€¦
8:13:54 PM [express] GET /api/auth/me 304 in 40ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7a9â€¦
Database connection removed from pool
Database connection removed from pool
8:16:20 PM [express] GET /api/auth/me 500 in 10010ms :: {"error":"Internal server error"}
New database connection established
8:49:41 PM [express] GET /api/auth/me 200 in 218ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7aâ€¦
8:58:36 PM [express] GET /api/auth/me 304 in 38ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7a9â€¦
8:59:16 PM [express] GET /api/stats/user/22c6dca2-f397-471c-b459-eb93a7a92815 304 in 39ms :: {"totalâ€¦
[library] user=22c6dca2-f397-471c-b459-eb93a7a92815 rows=104 limit=200 offset=0 progress=false duration=163ms
8:59:17 PM [express] GET /api/lms/library 304 in 180ms :: [{"id":64,"subject":"Biology","classLevel"â€¦
New database connection established
New database connection established
New database connection established
8:59:17 PM [express] GET /api/learn/continue-learning 402 in 466ms :: {"error":"PAYMENT_REQUIRED","mâ€¦
8:59:17 PM [express] GET /api/game/leaderboard/rank/22c6dca2-f397-471c-b459-eb93a7a92815 402 in 472mâ€¦
New database connection established
8:59:17 PM [express] GET /api/mentors/recommendations 304 in 487ms :: {"topRated":[{"id":1,"userId":â€¦
8:59:17 PM [express] GET /api/game/leaderboard 402 in 565ms :: {"error":"PAYMENT_REQUIRED","message"â€¦
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
Database connection removed from pool
New database connection established
New database connection established
9:00:02 PM [express] GET /api/learn/continue-learning 402 in 430ms :: {"error":"PAYMENT_REQUIRED","mâ€¦
9:00:02 PM [express] GET /api/game/leaderboard/rank/22c6dca2-f397-471c-b459-eb93a7a92815 402 in 465mâ€¦
9:00:06 PM [express] GET /api/chapters/by-chapter/physics/11/1 304 in 52ms :: {"id":1,"subject":"Phyâ€¦
9:00:06 PM [express] GET /api/chapters 304 in 259ms :: [{"id":4,"subject":"Physics","classLevel":"11â€¦
New database connection established
9:00:06 PM [express] GET /api/learn/bookmarks/keypoints 402 in 326ms :: {"error":"PAYMENT_REQUIRED",â€¦
9:00:06 PM [express] GET /api/learn/bookmarks/formulas 402 in 373ms :: {"error":"PAYMENT_REQUIRED","â€¦
9:00:06 PM [express] GET /api/chapters/chat/health 304 in 1ms :: {"configured":true,"model":"gpt-4o-â€¦
9:00:07 PM [express] GET /api/lms/bookmarks 304 in 77ms :: []
9:00:07 PM [express] POST /api/lms/sessions 201 in 251ms :: {"id":110,"userId":"22c6dca2-f397-471c-bâ€¦
9:00:07 PM [express] GET /api/questions 304 in 330ms :: {"questions":[],"total":0,"page":1,"limit":1â€¦
9:00:34 PM [express] GET /api/game/combo/22c6dca2-f397-471c-b459-eb93a7a92815/Physics 402 in 65ms ::â€¦
9:00:34 PM [express] PATCH /api/lms/sessions/110 400 in 44ms :: {"error":"value.toISOString is not aâ€¦
9:00:34 PM [express] GET /api/chapters/by-chapter/physics/11/1 304 in 54ms :: {"id":1,"subject":"Phyâ€¦
9:00:34 PM [express] GET /api/topics 304 in 92ms :: [{"id":1,"subject":"Physics","classLevel":"Classâ€¦
9:00:35 PM [express] GET /api/questions 200 in 80ms :: {"questions":[],"total":0,"page":1,"limit":10â€¦
9:00:40 PM [express] GET /api/questions/preview 304 in 44ms :: {"questions":[{"id":1,"topicId":1,"quâ€¦
9:00:44 PM [express] GET /api/mentors 304 in 63ms :: [{"id":1,"userId":"6cd94ae5-8f9d-485d-96ee-202dâ€¦
9:00:58 PM [express] GET /api/subscription-plans 304 in 1077ms :: [{"id":1,"name":"Free","slug":"freâ€¦
Database connection removed from pool
Database connection removed from pool
9:01:23 PM [express] GET /api/learn/continue-learning 402 in 175ms :: {"error":"PAYMENT_REQUIRED","mâ€¦
New database connection established
9:01:23 PM [express] GET /api/game/leaderboard/rank/22c6dca2-f397-471c-b459-eb93a7a92815 402 in 344mâ€¦
9:01:54 PM [express] GET /api/mock-exams/attempts 304 in 83ms :: {"data":[]}
9:01:54 PM [express] GET /api/mock-exams/papers 304 in 216ms :: {"data":[{"id":1,"seriesId":1,"titleâ€¦
9:02:01 PM [express] POST /api/mock-exams/papers/3/start 200 in 1999ms :: {"attemptId":2,"attemptEndâ€¦
9:05:14 PM [express] GET /api/auth/me 304 in 42ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7a9â€¦
9:06:39 PM [express] GET /api/auth/me 304 in 37ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7a9â€¦
9:06:41 PM [express] GET /api/auth/me 304 in 39ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7a9â€¦
9:07:41 PM [express] GET /api/auth/me 304 in 43ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7a9â€¦
Database connection removed from pool
Database connection removed from pool
New database connection established
9:19:02 PM [express] GET /api/auth/me 304 in 1195ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7â€¦
Database connection removed from pool
New database connection established
9:33:54 PM [express] GET /api/auth/me 304 in 173ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7aâ€¦
9:34:01 PM [express] GET /api/auth/me 304 in 145ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7aâ€¦
9:41:13 PM [express] GET /api/auth/me 304 in 32ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7a9â€¦
Database connection removed from pool
8:22:16 PM [express] POST /api/mock-exams/papers/3/start 500 in 6ms :: {"error":"Internal server errâ€¦
8:22:28 PM [express] GET /api/auth/me 500 in 5ms :: {"error":"Internal server error"}
New database connection established
8:33:34 PM [express] GET /api/auth/me 200 in 246ms :: {"user":{"id":"22c6dca2-f397-471c-b459-eb93a7aâ€¦
Database connection removed from pool
